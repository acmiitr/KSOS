\hypertarget{PIC_8c}{}\section{kernel/driver/\+P\+IC.c File Reference}
\label{PIC_8c}\index{kernel/driver/\+P\+I\+C.\+c@{kernel/driver/\+P\+I\+C.\+c}}


Programmable Interrupt Controller.  


{\ttfamily \#include \char`\"{}hal.\+h\char`\"{}}\newline
Include dependency graph for P\+I\+C.\+c\+:
% FIG 0
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{PIC_8c_ad1ba81484ab03e762d2e09f851c0901f}\label{PIC_8c_ad1ba81484ab03e762d2e09f851c0901f}} 
\#define {\bfseries P\+I\+C1\+\_\+\+C\+O\+M\+M\+A\+ND}~0x20
\item 
\mbox{\Hypertarget{PIC_8c_a11d8793812c9d340e9a64cce26ee0570}\label{PIC_8c_a11d8793812c9d340e9a64cce26ee0570}} 
\#define {\bfseries P\+I\+C2\+\_\+\+C\+O\+M\+M\+A\+ND}~0x\+A0
\item 
\mbox{\Hypertarget{PIC_8c_af27e966ec947ca1172f30ae301c5f24b}\label{PIC_8c_af27e966ec947ca1172f30ae301c5f24b}} 
\#define {\bfseries P\+I\+C1\+\_\+\+D\+A\+TA}~0x21
\item 
\mbox{\Hypertarget{PIC_8c_ab6d3b9f6f427357310896adf176145f1}\label{PIC_8c_ab6d3b9f6f427357310896adf176145f1}} 
\#define {\bfseries P\+I\+C2\+\_\+\+D\+A\+TA}~0x\+A1
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{PIC_8c_ab5ebdc1b31b3357377b0257473641ced}{pic\+\_\+init} ()
\item 
void \hyperlink{PIC_8c_aa6fb7395de34075ae303b15decf40c39}{send\+\_\+\+E\+O\+I\+\_\+master} ()
\item 
void \hyperlink{PIC_8c_a059c9beb90dd59c51f10ee39c9e54961}{send\+\_\+\+E\+O\+I\+\_\+slave} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Programmable Interrupt Controller. 

\begin{DoxySeeAlso}{See also}

\end{DoxySeeAlso}


\subsection{Function Documentation}
\mbox{\Hypertarget{PIC_8c_ab5ebdc1b31b3357377b0257473641ced}\label{PIC_8c_ab5ebdc1b31b3357377b0257473641ced}} 
\index{P\+I\+C.\+c@{P\+I\+C.\+c}!pic\+\_\+init@{pic\+\_\+init}}
\index{pic\+\_\+init@{pic\+\_\+init}!P\+I\+C.\+c@{P\+I\+C.\+c}}
\subsubsection{\texorpdfstring{pic\+\_\+init()}{pic\_init()}}
{\footnotesize\ttfamily void pic\+\_\+init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em } & \\
\hline
\end{DoxyParams}


Definition at line 20 of file P\+I\+C.\+c.


\begin{DoxyCode}
21 \{
22     
23     \textcolor{comment}{//ICW 1  Expect IC4|single?|0|level?|init?|000}
24     write\_port(PIC1\_COMMAND,0x11);
25     write\_port(PIC2\_COMMAND,0x11);
26     
27     \textcolor{comment}{//ICW 2  Remapping the IRQs}
28     write\_port(PIC1\_DATA,0x20);
29     write\_port(PIC2\_DATA,0x28);
30 
31     \textcolor{comment}{// Send ICW 3 to primary PIC}
32     \textcolor{comment}{// 0x4 = 0100 Second bit (IR Line 2)}
33     write\_port(PIC1\_DATA,0x04);
34 
35     \textcolor{comment}{// Send ICW 3 to secondary PIC}
36     \textcolor{comment}{// 010=> IR line 2}
37     \textcolor{comment}{// write to data register of secondary PIC}
38     write\_port(PIC2\_DATA,0x02);
39 
40     \textcolor{comment}{// Send ICW 4 - Set x86 mode --------------------------------}
41     \textcolor{comment}{// bit 0 enables 80x86 mode}
42     write\_port(PIC1\_DATA,0x01);
43     write\_port(PIC2\_DATA,0x01);
44  
45     
46     \textcolor{comment}{// Setting the IMR - All interrupts enabled}
47     write\_port(PIC1\_DATA,0);
48     write\_port(PIC2\_DATA,0);
49 \}
\end{DoxyCode}
\mbox{\Hypertarget{PIC_8c_aa6fb7395de34075ae303b15decf40c39}\label{PIC_8c_aa6fb7395de34075ae303b15decf40c39}} 
\index{P\+I\+C.\+c@{P\+I\+C.\+c}!send\+\_\+\+E\+O\+I\+\_\+master@{send\+\_\+\+E\+O\+I\+\_\+master}}
\index{send\+\_\+\+E\+O\+I\+\_\+master@{send\+\_\+\+E\+O\+I\+\_\+master}!P\+I\+C.\+c@{P\+I\+C.\+c}}
\subsubsection{\texorpdfstring{send\+\_\+\+E\+O\+I\+\_\+master()}{send\_EOI\_master()}}
{\footnotesize\ttfamily void send\+\_\+\+E\+O\+I\+\_\+master (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em } & \\
\hline
\end{DoxyParams}


Definition at line 55 of file P\+I\+C.\+c.


\begin{DoxyCode}
56 \{
57     write\_port(PIC1\_COMMAND,0x20);
58 \}
\end{DoxyCode}
\mbox{\Hypertarget{PIC_8c_a059c9beb90dd59c51f10ee39c9e54961}\label{PIC_8c_a059c9beb90dd59c51f10ee39c9e54961}} 
\index{P\+I\+C.\+c@{P\+I\+C.\+c}!send\+\_\+\+E\+O\+I\+\_\+slave@{send\+\_\+\+E\+O\+I\+\_\+slave}}
\index{send\+\_\+\+E\+O\+I\+\_\+slave@{send\+\_\+\+E\+O\+I\+\_\+slave}!P\+I\+C.\+c@{P\+I\+C.\+c}}
\subsubsection{\texorpdfstring{send\+\_\+\+E\+O\+I\+\_\+slave()}{send\_EOI\_slave()}}
{\footnotesize\ttfamily void send\+\_\+\+E\+O\+I\+\_\+slave (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em } & \\
\hline
\end{DoxyParams}


Definition at line 64 of file P\+I\+C.\+c.


\begin{DoxyCode}
65 \{
66     write\_port(PIC2\_COMMAND,0x20);
67 \}
\end{DoxyCode}
